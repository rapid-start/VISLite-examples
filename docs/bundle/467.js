(self.webpackChunkvislite_examples=self.webpackChunkvislite_examples||[]).push([[467],{467:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var i=n(872);var l=n(562),o=n(151),h=n(796),d=n.n(h);let a=+new Date(1968,9,3),r=[{name:"1968/9/3",value:Math.round(100*Math.random())}];for(let e=1;e<2e4;e++){var s=new Date(a+=864e5);r.push({name:[s.getFullYear(),s.getMonth()+1,s.getDate()].join("/"),value:Math.round(20*(Math.random()-.5)+r[e-1].value)})}const f=r;let g=["rgb(255, 158, 68)","rgb(255, 70, 131)"],x=900,u=500,c=55,y=20,I=55,b=30,v={x:0,y:0,height:26,width:0,bottom:10,beginIndex:Math.round(.3*(f.length-1)),endIndex:Math.round(.7*(f.length-1))},m=f[0].value,p=f[0].value;for(let e of f)e.value>p&&(p=e.value),e.value<m&&(m=e.value);let M,w=new(d()),T=0,S="",k=0,P=0,R=0,A=0,C=null,X={beginIndex:0,endIndex:0};const z=(0,i.defineElement)({template:[{name:"div",attr:{class:"tree-radial",id:"content-id","z-on:mousedown":"doStart","z-on:mousemove":"doMove","z-on:mouseup":"doEnd"},children:[]}],style:{content:l.A},created(){setTimeout((function(){v.x=c,v.y=u-v.height-v.bottom,v.width=x-c-I,R=v.width/(f.length-1),A=v.height/(p-m);let e=new o.Canvas(document.getElementById("content-id"),{region:!1});C=(0,o.throttle)((t=>{e.config({fillStyle:"white"}).fillRect(0,0,x,u).reset(),(e=>new Promise((t=>{if(M)t(M);else{e.config({strokeStyle:"#e8ecf6"}).strokeRect(v.x,v.y,v.width,v.height),e.config({fillStyle:"#ebeff8",lineWidth:2,lineJoin:"round"}).beginPath();for(let t=0;t<f.length;t++){let n=f[t];e.lineTo(v.x+t*R,v.y+v.height-A*(n.value-m))}e.stroke().lineTo(v.x+v.width,v.y+v.height).lineTo(v.x,v.y+v.height).fill(),e.toDataURL().then((e=>{let n=new Image;n.onload=()=>{M=n,t(M)},n.src=e}))}})))(e).then((n=>{k=v.x+v.beginIndex*R,P=v.x+v.endIndex*R,e.drawImage(n,0,0,x,u).then((()=>{e.config({fillStyle:"rgba(33,150,240,0.2)"}).fillRect(k,v.y,P-k,v.height);let n=P-k;n>20&&e.config({fillStyle:"#dfe5f3"}).fillRect(k,v.y,n,-7).config({fillStyle:"white"}).fillRect(k+.5*n-5,v.y-2,10,-3),e.config({strokeStyle:"#bbc8e3",fillStyle:"white"}).beginPath().moveTo(k,v.y).lineTo(k,v.y+v.height).stroke().beginPath().moveTo(P,v.y).lineTo(P,v.y+v.height).stroke().fullRect(k-3,v.y+5,6,v.height-10).fullRect(P-3,v.y+5,6,v.height-10),t&&e.config({fillStyle:"#aaa",textAlign:"right",fontSize:10}).fillText(f[v.beginIndex].name,k-5,v.y+.5*v.height).config({textAlign:"left"}).fillText(f[v.endIndex].name,P+5,v.y+.5*v.height);let i=f[v.beginIndex].value,l=f[v.beginIndex].value;for(let e=v.beginIndex+1;e<=v.endIndex;e++){let t=f[e];t.value>l&&(l=t.value),t.value<i&&(i=t.value)}g&&(i>0&&(i=0),l<0&&(l=0));let h=(0,o.ruler)(l,i,5);i=h[0],l=h[h.length-1];let d=u-b-v.bottom-v.height,a=e=>d-(e-i)/(l-i)*(d-y),r=e=>c+(x-c-I)*(e-v.beginIndex)/(v.endIndex-v.beginIndex);e.config({fillStyle:"#75777f",strokeStyle:"#e0e6f1",textAlign:"right",textBaseline:"middle",fontSize:10,lineWidth:.5});for(let t of h){let n=a(t);e.fillText(t,c-2,n).beginPath().moveTo(c,n).lineTo(x-I,n).stroke()}if(e.config({textBaseline:"top"}).fillText(f[v.endIndex].name,x-I,d+5).config({textAlign:"left"}).fillText(f[v.beginIndex].name,c,d+5),g){let t=a(0),n=(t-y)/(d-y);e.beginPath();for(let t=v.beginIndex;t<=v.endIndex;t++)e.lineTo(r(t),a(f[t].value));e.config({fillStyle:e.createLinearGradient(0,y,0,d).setColor(0,g[0]).setColor(n,g[1]).setColor(1,g[0]).value()}).lineTo(x-I,t).lineTo(c,t).fill()}e.config({lineWidth:2,strokeStyle:"#e94782"}).beginPath();for(let t=v.beginIndex;t<=v.endIndex;t++)e.lineTo(r(t),a(f[t].value));e.stroke()}))}))}),{time:50}),C()}),200)},methods:{doStart(e){C&&(w.setPoint(e.offsetX,e.offsetY),w.rect(k-3,v.y,6,v.height)?S="beginIndex":w.rect(P-3,v.y,6,v.height)?S="endIndex":w.rect(k,v.y-7,P-k,7)&&(T=e.offsetX,X.beginIndex=v.beginIndex,X.endIndex=v.endIndex))},doMove(e){if(S){let t;t=e.offsetX<=v.x?0:e.offsetX>=v.x+v.width?v.width:e.offsetX-v.x;let n=Math.round(t/R);if(v[S]!=n){if(v[S]=n,v.beginIndex>v.endIndex){let e=v.beginIndex;v.beginIndex=v.endIndex,v.endIndex=e,S="beginIndex"==S?"endIndex":"beginIndex"}C(!0)}}else if(T){let t=Math.round((e.offsetX-T)/R);X.beginIndex+t<0?t=-X.beginIndex:X.endIndex+t>=f.length&&(t=f.length-X.endIndex-1),v.beginIndex=X.beginIndex+t,v.endIndex=X.endIndex+t,C(!0)}},doEnd(){(S||T)&&(S="",T=0,C(!1))}}})},562:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(601),l=n.n(i),o=n(314),h=n.n(o)()(l());h.push([e.id,".tree-radial{width:900px;height:500px;margin:50px auto}",""]);const d=h},796:function(e){
/*!
 * PointIn v0.1.1
 * git+https://github.com/oi-contrib/PointIn.git
 */
e.exports=function(){"use strict";var e=function(e,t,n,i){return!(n>0&&e<0)&&(n<0&&e>0||(n>0&&e>0?i<t:n<0&&e<0?i>t:0==n&&0==e?i<t:0==n?!(e<0)&&i<t:n<0||i<t))},t=function(e,t){this.x=e||0,this.y=t||0};return t.prototype.setPoint=function(e,t){return this.x=e,this.y=t,this},t.prototype.arc=function(t,n,i,l,o,h){if(i>l){var d=i;i=l,l=d}if(this.circle(t,n,i)||!this.circle(t,n,l))return!1;var a,r;h>=0?(a=o,r=o+h):(r=o,a=o+h),a%=2*Math.PI,r%=2*Math.PI,a<0&&(a+=2*Math.PI),r<0&&(r+=2*Math.PI);var s=Math.sqrt((t-this.x)*(t-this.x)+(n-this.y)*(n-this.y)),f=(this.y-n)/s,g=(this.x-t)/s;return a<r?e(Math.sin(a),Math.cos(a),f,g)&&e(f,g,Math.sin(r),Math.cos(r)):!(e(Math.sin(r),Math.cos(r),f,g)&&e(f,g,Math.sin(a),Math.cos(a)))},t.prototype.circle=function(e,t,n){return!(this.x<e-n||this.x>e+n||this.y<t-n||this.y>t+n)&&(e-this.x)*(e-this.x)+(t-this.y)*(t-this.y)<=n*n},t.prototype.polygon=function(e){e.push(e[0]);for(var t=0,n=0;n<e.length-1;n++){var i=e[n],l=e[n+1];i[0]==l[0]&&i[1]==l[1]||(i[1]-this.y)*(l[1]-this.y)<0&&[i[0]+(l[0]-i[0])*(this.y-i[1])/(l[1]-i[1]),this.y][0]>this.x&&(i[1]<l[1]?t+=1:t-=1)}return 0!=t},t.prototype.rect=function(e,t,n,i){return this.x>=e&&this.x<=e+n&&this.y>=t&&this.y<=t+i},t}()}}]);