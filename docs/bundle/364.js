"use strict";(self.webpackChunkvislite_examples=self.webpackChunkvislite_examples||[]).push([[364],{321:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(601),i=n.n(r),a=n(314),l=n.n(a)()(i());l.push([e.id,".ring3d{height:500px;text-align:center}.ring3d .title{font-size:20px;line-height:50px;font-weight:600}.ring3d .sub-title{font-size:12px;font-weight:200}.ring3d .content{display:inline-block;width:435px;height:435px}",""]);const o=l},364:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(872);var i=n(321),a=n(151);const l=e=>{const t=document.getElementsByTagName("head")[0];t.style.color=e;const n=((e,t)=>{const n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle;return"string"==typeof t?n.getPropertyValue(t):n})(t,"color").replace(/rgba?\(/,"").replace(")","").split(",");for(let e=0;e<n.length;e++)n[e]=+n[e];return n.push(1),[n[0]/255,n[1]/255,n[2]/255,n[3]]},o=JSON.parse('[{"value":1048,"name":"Search Engine"},{"value":735,"name":"Direct"},{"value":580,"name":"Email"},{"value":484,"name":"Union Ads"},{"value":300,"name":"Video Ads"}]');let s=(0,a.getLoopColors)(o.length);const d=(0,r.defineElement)({template:[{name:"div",attr:{class:"ring3d"},children:[{name:"div",attr:{class:"title"},children:["\r\n        Referer of a Website\r\n    "]},{name:"div",attr:{class:"sub-title"},children:["\r\n        Fake Data\r\n    "]},{name:"div",attr:{id:"content-id",class:"content"},children:[]}]}],style:{content:i.A},created(){setTimeout((function(){let e=[];for(let t=0;t<s.length;t++)e.push(l(s[t]));let t=(0,a.getLoopColors)(o.length,.9),n=[];for(let e=0;e<s.length;e++)n.push(l(t[e]));let r=document.getElementById("content-id"),i=(0,a.getWebGLContext)(r,1,"aspectFill");i.enable(i.DEPTH_TEST);let d=new a.Shader(i).compile("attribute vec4 a_position;\r\nuniform mat4 u_matrix;\r\n\r\nvoid main()\r\n{\r\n    vec4 temp = u_matrix * a_position;\r\n\r\n    // 把原生的WebGL使用的左手坐标系变成了右手坐标系\r\n    temp.z = -1.0 * temp.z;\r\n\r\n    // 表示眼睛距离vec4(0.0,0.0,1.0)的距离\r\n    float dist = 4.0;\r\n\r\n    // 使用投影直接计算\r\n    // 为保证纹理和相对位置正确\r\n    // x、y、z的改变满足线性变换\r\n    gl_Position = vec4((dist + 1.0) * temp.x, (dist + 1.0) * temp.y, dist * (dist + temp.z) + 1.0 - dist * dist, temp.w * 2.0 * (dist + temp.z));\r\n}","precision mediump float;\r\n\r\nuniform vec4 u_color;\r\n\r\nvoid main()\r\n{\r\n    gl_FragColor = u_color;\r\n}").use(),u=i.getUniformLocation(d.program,"u_matrix"),c=i.getAttribLocation(d.program,"a_position"),m=i.getUniformLocation(d.program,"u_color"),p=new a.Buffer(i).use(),g=(new a.Matrix4).scale(.7,.7,.7).rotate(-1,1,0,0);i.uniformMatrix4fv(u,!1,g.value());let h=0;for(let e=0;e<o.length;e++)h+=o[e].value;let f=-.5*Math.PI;for(let t=0;t<o.length;t++){let l=o[t].value/h*Math.PI*2,s=[],d=[],u=[],g=[],v=Math.ceil(l*r.clientHeight*.1),w=.8,y=1.7,_=.1,x=l/v;for(let e=0;e<=v;e++){let t=(0,a.rotate)(0,0,f+x*e,y,0),n=(0,a.rotate)(0,0,f+x*e,w,0);s.push(t[0],t[1],_,n[0],n[1],_),d.push(t[0],t[1],-_,n[0],n[1],-_),u.push(n[0],n[1],_,n[0],n[1],-_),g.push(t[0],t[1],_,t[0],t[1],-_)}i.uniform4f(m,...e[t]),p.write(new Float32Array(s)).divide(c,3,3,0),i.drawArrays(i.TRIANGLE_STRIP,0,s.length/3),p.write(new Float32Array(d)).divide(c,3,3,0),i.drawArrays(i.TRIANGLE_STRIP,0,d.length/3),i.uniform4f(m,...n[t]),p.write(new Float32Array(u)).divide(c,3,3,0),i.drawArrays(i.TRIANGLE_STRIP,0,u.length/3),p.write(new Float32Array(g)).divide(c,3,3,0),i.drawArrays(i.TRIANGLE_STRIP,0,g.length/3),f+=l}}),200)}})}}]);