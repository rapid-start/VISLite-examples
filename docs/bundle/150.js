"use strict";(self.webpackChunkvislite_examples=self.webpackChunkvislite_examples||[]).push([[150],{150:(t,n,o)=>{o.r(n),o.d(n,{default:()=>c});var e=o(872);var i=o(797),s=o(151);const r=function(t,n,o=2*Math.PI){const e=Math.ceil(o/Math.asin(t/n)*2);return isNaN(e)||e<12?12:e};function p(t,n,o,e,i,r,p,h=0,a=2*Math.PI){let l,u;if(4==r){const t=i/1.414;l=n+t,u=e+t}else l=n+i,u=e;let m=[l,u];0!=h&&(m=(0,s.rotate)(n,e,h,l,u));const c=[],_=a/r;for(let i=0;i<r;i++)c.push(n,o,e),t&&c.push(0,p,0),c.push(m[0],o,m[1]),t&&c.push(0,p,0),m=(0,s.rotate)(n,e,_*(i+1),l,u),c.push(m[0],o,m[1]),t&&c.push(0,p,0);return c}function h(t,n,o,e,i,r,p,h=0,a=2*Math.PI){const l=[];let u;u=4==p?(0,s.rotate)(n,e,.25*Math.PI,n-i,e):[n+i,e],0!=h&&(u=(0,s.rotate)(n,e,h,...u));const m=a/p,c=a/(2*p);let _,f=[];for(let i=0;i<p;i++){if(_=(0,s.rotate)(n,e,m,...u),t){const t=(0,s.rotate)(n,e,c,...u);f=[t[0],0,t[1]]}l.push(u[0],o,u[1],...f),l.push(u[0],o+r,u[1],...f),l.push(_[0],o+r,_[1],...f),l.push(u[0],o,u[1],...f),l.push(_[0],o,_[1],...f),l.push(_[0],o+r,_[1],...f),u=_}return l}function a(t,n,o,e,i,r,p){const h=[n,o+i,e],a=2*Math.PI/r;let l;t&&h.push(0,i,0);const u=()=>{h.push(...h.slice(h.length-(t?12:6)))};for(let m=1;m<.5*r;m++){l=(0,s.rotate)(n,o,a*m,n,o+i),m>1&&u();const r=(0,s.rotate)(n,e,a*p,l[0],e);h.push(r[0],l[1],r[1]),t&&h.push(r[0]-n,l[1]-o,r[1]-e),m>1&&u();const c=(0,s.rotate)(n,e,a*(p+1),l[0],e);h.push(c[0],l[1],c[1]),t&&h.push(c[0]-n,c[1]-o,c[1]-e)}return u(),h.push(n,o-i,e),t&&h.push(0,-i,0),h}function l(t,n,o,e,i,s){return(r,p,h,a)=>{if(t==e&&o==s)return[r,p,h];let l,u,m,c=r-(a?0:t),_=p-(a?0:n),f=h-(a?0:o);const d=e-t,g=i-n,v=s-o,A=Math.sqrt(d*d+v*v);u=d/A,l=v/A;const I=v*l+d*u,L=Math.sqrt(g*g+I*I);return u=g/L,l=I/L,m=[_,c],_=m[0]*u-m[1]*l,c=m[0]*l+m[1]*u,u=d/A,l=v/A,m=[c,f],c=m[0]*u-m[1]*l,f=m[0]*l+m[1]*u,[c+(a?0:t),_+(a?0:n),f+(a?0:o)]}}function u(t,n){if(t){const t=[];for(let o=0;o<n.length;o+=9){const e=[n[o+3]-n[o],n[o+4]-n[o+1],n[o+5]-n[o+2]],i=[n[o+6]-n[o],n[o+7]-n[o+1],n[o+8]-n[o+2]],s=[e[1]*i[2]-i[1]*e[2],e[2]*i[0]-e[0]*i[2],e[0]*i[1]-e[1]*i[2]];t.push(n[o],n[o+1],n[o+2],...s,n[o+3],n[o+4],n[o+5],...s,n[o+6],n[o+7],n[o+8],...s)}return t}return n}const m=class{__option;constructor(t={}){this.__option=function(t,n){for(const o in t)n[o]=t[o];return n}(t,{precision:.1,normal:!1})}splitNum(t,n){return r(this.__option.precision,t,n)}rotateLine(t,n,o,e,i,s){const r=l(t,n,o,e,i,s);return(t,n,o)=>r(t,n,o,this.__option.normal)}prismHorizontal(t,n,o,e,i,s,r,h){return p(this.__option.normal,t,n,o,e,i,s,r,h)}prismVertical(t,n,o,e,i,s,r,p){return h(this.__option.normal,t,n,o,e,i,s,r,p)}sphereFragment(t,n,o,e,i,s){return a(this.__option.normal,t,n,o,e,i,s)}pie(t,n,o,e,i,a,l){const m=r(this.__option.precision,e,l),c=(0,s.rotate)(t,o,a,t+e,o),_=(0,s.rotate)(t,o,a+l,t+e,o);return[{name:"bottom",points:p(this.__option.normal,t,n,o,e,m,i>0?-1:1,a,l),length:3*m,method:"TRIANGLES"},{name:"top",points:p(this.__option.normal,t,n+i,o,e,m,i>0?1:-1,a,l),length:3*m,method:"TRIANGLES"},{name:"side",points:h(this.__option.normal,t,n,o,e,i,m,a,l),length:6*m,method:"TRIANGLES"},{name:"begin",points:u(this.__option.normal,[t,n,o,t,n+i,o,c[0],n,c[1],c[0],n+i,c[1],c[0],n,c[1],t,n+i,o]),length:6,method:"TRIANGLES"},{name:"end",points:u(this.__option.normal,[t,n,o,_[0],n,_[1],t,n+i,o,_[0],n+i,_[1],t,n+i,o,_[0],n,_[1]]),length:6,method:"TRIANGLES"}]}cylinder(t,n,o,e,i,s,p){const h=r(this.__option.precision,e);return 5==arguments.length?this.prism(t,n,o,e,i,h):this.prism(t,n,o,e,i,s,p,h)}prism(t,n,o,e,i,s,r,a){let u,m=null;6==arguments.length?(u=i,a=s):(u=(n>s?-1:1)*Math.sqrt((i-t)*(i-t)+(s-n)*(s-n)+(r-o)*(r-o)),m=l(t,n,o,i,s,r));const c=[{name:"bottom",points:[],length:0,method:"TRIANGLES"},{name:"top",points:[],length:0,method:"TRIANGLES"},{name:"side",points:[],length:0,method:"TRIANGLES"}];c[0].points.push(...p(this.__option.normal,t,n,o,e,a,u>0?-1:1)),c[1].points.push(...p(this.__option.normal,t,n+u,o,e,a,u>0?1:-1)),c[2].points.push(...h(this.__option.normal,t,n,o,e,u,a));for(let t=0;t<c.length;t++){if(m){const n=[];let o=!1;for(let e=0;e<c[t].points.length;e+=3)n.push(...m(c[t].points[e],c[t].points[e+1],c[t].points[e+2],this.__option.normal&&o)),o=!o;c[t].points=n}c[t].length=c[t].points.length/(this.__option.normal?6:3)}return c}sphere(t,n,o,e){const i=r(this.__option.precision,e),s=[{name:"surface",points:[],length:0,method:"TRIANGLES"}];for(let r=0;r<i;r++)s[0].points.push(...a(this.__option.normal,t,n,o,e,i,r));return s[0].length=s[0].points.length/(this.__option.normal?6:3),s}},c=(0,e.defineElement)({template:[{name:"div",attr:{class:"h2o",id:"content-id"},children:[]}],style:{content:i.A},data:()=>({isClose:!1}),created(){let t=this;setTimeout((function(){let n=new m,o=(0,s.getWebGLContext)(document.getElementById("content-id")),e=new s.Shader(o).compile("attribute vec4 a_position;\nuniform mat4 u_matrix;\n\nvoid main()\n{\n    vec4 temp = u_matrix * a_position;\n\n    // 把原生的WebGL使用的左手坐标系变成了右手坐标系\n    temp.z = -1.0 * temp.z;\n\n    // 表示眼睛距离vec4(0.0,0.0,1.0)的距离\n    float dist = 4.0;\n\n    // 使用投影直接计算\n    // 为保证纹理和相对位置正确\n    // x、y、z的改变满足线性变换\n    gl_Position = vec4((dist + 1.0) * temp.x, (dist + 1.0) * temp.y, dist * (dist + temp.z) + 1.0 - dist * dist, temp.w * 2.0 * (dist + temp.z));\n}","precision mediump float;\n\nuniform vec4 u_color;\n\nvoid main()\n{\n    gl_FragColor = u_color;\n}").use(),i=new s.Buffer(o).use();o.enable(o.DEPTH_TEST);let r=n.sphere(-.7,0,0,.36),p=n.sphere(.7,0,0,.36),h=n.sphere(0,.7,0,.5),a=n.cylinder(-.7,0,0,.16,0,.7,0),l=n.cylinder(.7,0,0,.16,0,.7,0),u=new s.Matrix4,c=o.getUniformLocation(e.program,"u_matrix"),_=o.getAttribLocation(e.program,"a_position"),f=o.getUniformLocation(e.program,"u_color"),d=function(t){for(let n=0;n<t.length;n++)i.write(new Float32Array(t[n].points)).divide(_,3,3,0),o.drawArrays(o[t[n].method],0,t[n].length)};!function n(){o.uniformMatrix4fv(c,!1,u.rotate(.05,-1,.2,0,1,.2,0).value()),o.uniform4f(f,1,.2,.2,1),d(h),o.uniform4f(f,.6,.6,.6,1),d(r),d(p),o.uniform4f(f,.2,.3,.1,.4),d(a),d(l),t.isClose||requestAnimationFrame(n)}()}),200)},beforeDestroy(){this.isClose=!0}})},797:(t,n,o)=>{o.d(n,{A:()=>p});var e=o(601),i=o.n(e),s=o(314),r=o.n(s)()(i());r.push([t.id,".h2o{width:500px;height:500px;position:fixed;left:50%;top:50%;transform:translate(-50%, -50%);text-align:center}",""]);const p=r}}]);