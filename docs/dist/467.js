(self.webpackChunkvislite_examples=self.webpackChunkvislite_examples||[]).push([[467],{467:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var i=n(872);var l=n(562),o=n(151),h=n(796),a=n.n(h);let d=+new Date(1968,9,3),r=[{name:"1968/9/3",value:Math.round(100*Math.random())}];for(let e=1;e<2e4;e++){var s=new Date(d+=864e5);r.push({name:[s.getFullYear(),s.getMonth()+1,s.getDate()].join("/"),value:Math.round(20*(Math.random()-.5)+r[e-1].value)})}const g=r;let f=["rgb(255, 158, 68)","rgb(255, 70, 131)"],x=900,c=500,u=55,y=20,I=55,b=30,m={x:0,y:0,height:26,width:0,bottom:10,beginIndex:Math.round(.3*(g.length-1)),endIndex:Math.round(.7*(g.length-1))},v=g[0].value,p=g[0].value;for(let e of g)e.value>p&&(p=e.value),e.value<v&&(v=e.value);let M,w=new(a()),T=0,k="",S=0,P=0,R=0,A=0,C=null,X={beginIndex:0,endIndex:0};const z=(0,i.defineElement)({template:[{name:"div",attr:{class:"dialog-example"},children:[{name:"div",attr:{class:"content"},children:[{name:"header",attr:{},children:[{name:"h2",attr:{style:"background-image: url(./images/logo.png);"},children:["\r\n                可缩放折线图\r\n            "]},{name:"div",attr:{class:"win-btns"},children:[{name:"button",attr:{class:"close",style:"background-image: url(./images/close-btn.png);",onclick:"toWelcome()"},children:["关闭"]}]}]},{name:"div",attr:{class:"tree-radial",id:"content-id","z-on:mousedown":"doStart","z-on:mousemove":"doMove","z-on:mouseup":"doEnd"},children:[]}]}]}],style:{content:l.A},created(){setTimeout((function(){m.x=u,m.y=c-m.height-m.bottom,m.width=x-u-I,R=m.width/(g.length-1),A=m.height/(p-v);let e=new o.Canvas(document.getElementById("content-id"),{region:!1});C=(0,o.throttle)((t=>{e.config({fillStyle:"white"}).fillRect(0,0,x,c).reset(),(e=>new Promise((t=>{if(M)t(M);else{e.config({strokeStyle:"#e8ecf6"}).strokeRect(m.x,m.y,m.width,m.height),e.config({fillStyle:"#ebeff8",lineWidth:2,lineJoin:"round"}).beginPath();for(let t=0;t<g.length;t++){let n=g[t];e.lineTo(m.x+t*R,m.y+m.height-A*(n.value-v))}e.stroke().lineTo(m.x+m.width,m.y+m.height).lineTo(m.x,m.y+m.height).fill(),e.toDataURL().then((e=>{let n=new Image;n.onload=()=>{M=n,t(M)},n.src=e}))}})))(e).then((n=>{S=m.x+m.beginIndex*R,P=m.x+m.endIndex*R,e.drawImage(n,0,0,x,c).then((()=>{e.config({fillStyle:"rgba(33,150,240,0.2)"}).fillRect(S,m.y,P-S,m.height);let n=P-S;n>20&&e.config({fillStyle:"#dfe5f3"}).fillRect(S,m.y,n,-7).config({fillStyle:"white"}).fillRect(S+.5*n-5,m.y-2,10,-3),e.config({strokeStyle:"#bbc8e3",fillStyle:"white"}).beginPath().moveTo(S,m.y).lineTo(S,m.y+m.height).stroke().beginPath().moveTo(P,m.y).lineTo(P,m.y+m.height).stroke().fullRect(S-3,m.y+5,6,m.height-10).fullRect(P-3,m.y+5,6,m.height-10),t&&e.config({fillStyle:"#aaa",textAlign:"right",fontSize:10}).fillText(g[m.beginIndex].name,S-5,m.y+.5*m.height).config({textAlign:"left"}).fillText(g[m.endIndex].name,P+5,m.y+.5*m.height);let i=g[m.beginIndex].value,l=g[m.beginIndex].value;for(let e=m.beginIndex+1;e<=m.endIndex;e++){let t=g[e];t.value>l&&(l=t.value),t.value<i&&(i=t.value)}f&&(i>0&&(i=0),l<0&&(l=0));let h=(0,o.ruler)(l,i,5);i=h[0],l=h[h.length-1];let a=c-b-m.bottom-m.height,d=e=>a-(e-i)/(l-i)*(a-y),r=e=>u+(x-u-I)*(e-m.beginIndex)/(m.endIndex-m.beginIndex);e.config({fillStyle:"#75777f",strokeStyle:"#e0e6f1",textAlign:"right",textBaseline:"middle",fontSize:10,lineWidth:.5});for(let t of h){let n=d(t);e.fillText(t,u-2,n).beginPath().moveTo(u,n).lineTo(x-I,n).stroke()}if(e.config({textBaseline:"top"}).fillText(g[m.endIndex].name,x-I,a+5).config({textAlign:"left"}).fillText(g[m.beginIndex].name,u,a+5),f){let t=d(0),n=(t-y)/(a-y);e.beginPath();for(let t=m.beginIndex;t<=m.endIndex;t++)e.lineTo(r(t),d(g[t].value));e.config({fillStyle:e.createLinearGradient(0,y,0,a).setColor(0,f[0]).setColor(n,f[1]).setColor(1,f[0]).value()}).lineTo(x-I,t).lineTo(u,t).fill()}e.config({lineWidth:2,strokeStyle:"#e94782"}).beginPath();for(let t=m.beginIndex;t<=m.endIndex;t++)e.lineTo(r(t),d(g[t].value));e.stroke()}))}))}),{time:50}),C()}),200)},methods:{doStart(e){C&&(w.setPoint(e.offsetX,e.offsetY),w.rect(S-3,m.y,6,m.height)?k="beginIndex":w.rect(P-3,m.y,6,m.height)?k="endIndex":w.rect(S,m.y-7,P-S,7)&&(T=e.offsetX,X.beginIndex=m.beginIndex,X.endIndex=m.endIndex))},doMove(e){if(k){let t;t=e.offsetX<=m.x?0:e.offsetX>=m.x+m.width?m.width:e.offsetX-m.x;let n=Math.round(t/R);if(m[k]!=n){if(m[k]=n,m.beginIndex>m.endIndex){let e=m.beginIndex;m.beginIndex=m.endIndex,m.endIndex=e,k="beginIndex"==k?"endIndex":"beginIndex"}C(!0)}}else if(T){let t=Math.round((e.offsetX-T)/R);X.beginIndex+t<0?t=-X.beginIndex:X.endIndex+t>=g.length&&(t=g.length-X.endIndex-1),m.beginIndex=X.beginIndex+t,m.endIndex=X.endIndex+t,C(!0)}},doEnd(){(k||T)&&(k="",T=0,C(!1))}}})},562:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(601),l=n.n(i),o=n(314),h=n.n(o)()(l());h.push([e.id,".tree-radial{width:900px;height:500px;margin:50px auto}",""]);const a=h},796:function(e){
/*!
 * PointIn v0.1.1
 * git+https://github.com/oi-contrib/PointIn.git
 */
e.exports=function(){"use strict";var e=function(e,t,n,i){return!(n>0&&e<0)&&(n<0&&e>0||(n>0&&e>0?i<t:n<0&&e<0?i>t:0==n&&0==e?i<t:0==n?!(e<0)&&i<t:n<0||i<t))},t=function(e,t){this.x=e||0,this.y=t||0};return t.prototype.setPoint=function(e,t){return this.x=e,this.y=t,this},t.prototype.arc=function(t,n,i,l,o,h){if(i>l){var a=i;i=l,l=a}if(this.circle(t,n,i)||!this.circle(t,n,l))return!1;var d,r;h>=0?(d=o,r=o+h):(r=o,d=o+h),d%=2*Math.PI,r%=2*Math.PI,d<0&&(d+=2*Math.PI),r<0&&(r+=2*Math.PI);var s=Math.sqrt((t-this.x)*(t-this.x)+(n-this.y)*(n-this.y)),g=(this.y-n)/s,f=(this.x-t)/s;return d<r?e(Math.sin(d),Math.cos(d),g,f)&&e(g,f,Math.sin(r),Math.cos(r)):!(e(Math.sin(r),Math.cos(r),g,f)&&e(g,f,Math.sin(d),Math.cos(d)))},t.prototype.circle=function(e,t,n){return!(this.x<e-n||this.x>e+n||this.y<t-n||this.y>t+n)&&(e-this.x)*(e-this.x)+(t-this.y)*(t-this.y)<=n*n},t.prototype.polygon=function(e){e.push(e[0]);for(var t=0,n=0;n<e.length-1;n++){var i=e[n],l=e[n+1];i[0]==l[0]&&i[1]==l[1]||(i[1]-this.y)*(l[1]-this.y)<0&&[i[0]+(l[0]-i[0])*(this.y-i[1])/(l[1]-i[1]),this.y][0]>this.x&&(i[1]<l[1]?t+=1:t-=1)}return 0!=t},t.prototype.rect=function(e,t,n,i){return this.x>=e&&this.x<=e+n&&this.y>=t&&this.y<=t+i},t}()}}]);