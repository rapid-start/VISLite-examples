"use strict";(self.webpackChunkvislite_examples=self.webpackChunkvislite_examples||[]).push([[150],{150:(t,n,e)=>{e.r(n),e.d(n,{default:()=>u});var o=e(872);var i=e(797),r=e(151);const s=function(t,n,e=2*Math.PI){const o=Math.ceil(e/Math.asin(t/n)*2);return isNaN(o)||o<12?12:o};function a(t,n,e,o,i,s,a,l=0,p=2*Math.PI){let h,m;if(4==s){const t=i/1.414;h=n+t,m=o+t}else h=n+i,m=o;let c=[h,m];0!=l&&(c=(0,r.rotate)(n,o,l,h,m));const u=[],d=p/s;for(let i=0;i<s;i++)u.push(n,e,o),t&&u.push(0,a,0),u.push(c[0],e,c[1]),t&&u.push(0,a,0),c=(0,r.rotate)(n,o,d*(i+1),h,m),u.push(c[0],e,c[1]),t&&u.push(0,a,0);return u}function l(t,n,e,o,i,s,a,l=0,p=2*Math.PI){const h=[];let m;m=4==a?(0,r.rotate)(n,o,.25*Math.PI,n-i,o):[n+i,o],0!=l&&(m=(0,r.rotate)(n,o,l,...m));const c=p/a,u=p/(2*a);let d,_=[];for(let i=0;i<a;i++){if(d=(0,r.rotate)(n,o,c,...m),t){const t=(0,r.rotate)(n,o,u,...m);_=[t[0],0,t[1]]}h.push(m[0],e,m[1],..._),h.push(m[0],e+s,m[1],..._),h.push(d[0],e+s,d[1],..._),h.push(m[0],e,m[1],..._),h.push(d[0],e,d[1],..._),h.push(d[0],e+s,d[1],..._),m=d}return h}function p(t,n,e,o,i,s,a){const l=[n,e+i,o],p=2*Math.PI/s;let h;t&&l.push(0,i,0);const m=()=>{l.push(...l.slice(l.length-(t?12:6)))};for(let c=1;c<.5*s;c++){h=(0,r.rotate)(n,e,p*c,n,e+i),c>1&&m();const s=(0,r.rotate)(n,o,p*a,h[0],o);l.push(s[0],h[1],s[1]),t&&l.push(s[0]-n,h[1]-e,s[1]-o),c>1&&m();const u=(0,r.rotate)(n,o,p*(a+1),h[0],o);l.push(u[0],h[1],u[1]),t&&l.push(u[0]-n,u[1]-e,u[1]-o)}return m(),l.push(n,e-i,o),t&&l.push(0,-i,0),l}function h(t,n,e,o,i,r){return(s,a,l,p)=>{if(t==o&&e==r)return[s,a,l];let h,m,c,u=s-(p?0:t),d=a-(p?0:n),_=l-(p?0:e);const f=o-t,g=i-n,v=r-e,b=Math.sqrt(f*f+v*v);m=f/b,h=v/b;const A=v*h+f*m,I=Math.sqrt(g*g+A*A);return m=g/I,h=A/I,c=[d,u],d=c[0]*m-c[1]*h,u=c[0]*h+c[1]*m,m=f/b,h=v/b,c=[u,_],u=c[0]*m-c[1]*h,_=c[0]*h+c[1]*m,[u+(p?0:t),d+(p?0:n),_+(p?0:e)]}}function m(t,n){if(t){const t=[];for(let e=0;e<n.length;e+=9){const o=[n[e+3]-n[e],n[e+4]-n[e+1],n[e+5]-n[e+2]],i=[n[e+6]-n[e],n[e+7]-n[e+1],n[e+8]-n[e+2]],r=[o[1]*i[2]-i[1]*o[2],o[2]*i[0]-o[0]*i[2],o[0]*i[1]-o[1]*i[2]];t.push(n[e],n[e+1],n[e+2],...r,n[e+3],n[e+4],n[e+5],...r,n[e+6],n[e+7],n[e+8],...r)}return t}return n}const c=class{__option;constructor(t={}){this.__option=function(t,n){for(const e in t)n[e]=t[e];return n}(t,{precision:.1,normal:!1})}splitNum(t,n){return s(this.__option.precision,t,n)}rotateLine(t,n,e,o,i,r){const s=h(t,n,e,o,i,r);return(t,n,e)=>s(t,n,e,this.__option.normal)}prismHorizontal(t,n,e,o,i,r,s,l){return a(this.__option.normal,t,n,e,o,i,r,s,l)}prismVertical(t,n,e,o,i,r,s,a){return l(this.__option.normal,t,n,e,o,i,r,s,a)}sphereFragment(t,n,e,o,i,r){return p(this.__option.normal,t,n,e,o,i,r)}pie(t,n,e,o,i,p,h){const c=s(this.__option.precision,o,h),u=(0,r.rotate)(t,e,p,t+o,e),d=(0,r.rotate)(t,e,p+h,t+o,e);return[{name:"bottom",points:a(this.__option.normal,t,n,e,o,c,i>0?-1:1,p,h),length:3*c,method:"TRIANGLES"},{name:"top",points:a(this.__option.normal,t,n+i,e,o,c,i>0?1:-1,p,h),length:3*c,method:"TRIANGLES"},{name:"side",points:l(this.__option.normal,t,n,e,o,i,c,p,h),length:6*c,method:"TRIANGLES"},{name:"begin",points:m(this.__option.normal,[t,n,e,t,n+i,e,u[0],n,u[1],u[0],n+i,u[1],u[0],n,u[1],t,n+i,e]),length:6,method:"TRIANGLES"},{name:"end",points:m(this.__option.normal,[t,n,e,d[0],n,d[1],t,n+i,e,d[0],n+i,d[1],t,n+i,e,d[0],n,d[1]]),length:6,method:"TRIANGLES"}]}cylinder(t,n,e,o,i,r,a){const l=s(this.__option.precision,o);return 5==arguments.length?this.prism(t,n,e,o,i,l):this.prism(t,n,e,o,i,r,a,l)}prism(t,n,e,o,i,r,s,p){let m,c=null;6==arguments.length?(m=i,p=r):(m=(n>r?-1:1)*Math.sqrt((i-t)*(i-t)+(r-n)*(r-n)+(s-e)*(s-e)),c=h(t,n,e,i,r,s));const u=[{name:"bottom",points:[],length:0,method:"TRIANGLES"},{name:"top",points:[],length:0,method:"TRIANGLES"},{name:"side",points:[],length:0,method:"TRIANGLES"}];u[0].points.push(...a(this.__option.normal,t,n,e,o,p,m>0?-1:1)),u[1].points.push(...a(this.__option.normal,t,n+m,e,o,p,m>0?1:-1)),u[2].points.push(...l(this.__option.normal,t,n,e,o,m,p));for(let t=0;t<u.length;t++){if(c){const n=[];let e=!1;for(let o=0;o<u[t].points.length;o+=3)n.push(...c(u[t].points[o],u[t].points[o+1],u[t].points[o+2],this.__option.normal&&e)),e=!e;u[t].points=n}u[t].length=u[t].points.length/(this.__option.normal?6:3)}return u}sphere(t,n,e,o){const i=s(this.__option.precision,o),r=[{name:"surface",points:[],length:0,method:"TRIANGLES"}];for(let s=0;s<i;s++)r[0].points.push(...p(this.__option.normal,t,n,e,o,i,s));return r[0].length=r[0].points.length/(this.__option.normal?6:3),r}},u=(0,o.defineElement)({template:[{name:"div",attr:{class:"dialog-example"},children:[{name:"div",attr:{class:"content"},children:[{name:"header",attr:{},children:[{name:"h2",attr:{style:"background-image: url(./images/logo.png);"},children:["\r\n                水分子式 H2O\r\n            "]},{name:"div",attr:{class:"win-btns"},children:[{name:"button",attr:{class:"close",style:"background-image: url(./images/close-btn.png);",onclick:"toWelcome()"},children:["关闭"]}]}]},{name:"div",attr:{class:"h2o",id:"content-id"},children:[]}]}]}],style:{content:i.A},data:()=>({isClose:!1}),created(){let t=this;setTimeout((function(){let n=new c,e=(0,r.getWebGLContext)(document.getElementById("content-id")),o=new r.Shader(e).compile("attribute vec4 a_position;\r\nuniform mat4 u_matrix;\r\n\r\nvoid main()\r\n{\r\n    vec4 temp = u_matrix * a_position;\r\n\r\n    // 把原生的WebGL使用的左手坐标系变成了右手坐标系\r\n    temp.z = -1.0 * temp.z;\r\n\r\n    // 表示眼睛距离vec4(0.0,0.0,1.0)的距离\r\n    float dist = 4.0;\r\n\r\n    // 使用投影直接计算\r\n    // 为保证纹理和相对位置正确\r\n    // x、y、z的改变满足线性变换\r\n    gl_Position = vec4((dist + 1.0) * temp.x, (dist + 1.0) * temp.y, dist * (dist + temp.z) + 1.0 - dist * dist, temp.w * 2.0 * (dist + temp.z));\r\n}","precision mediump float;\r\n\r\nuniform vec4 u_color;\r\n\r\nvoid main()\r\n{\r\n    gl_FragColor = u_color;\r\n}").use(),i=new r.Buffer(e).use();e.enable(e.DEPTH_TEST);let s=n.sphere(-.7,0,0,.36),a=n.sphere(.7,0,0,.36),l=n.sphere(0,.7,0,.5),p=n.cylinder(-.7,0,0,.16,0,.7,0),h=n.cylinder(.7,0,0,.16,0,.7,0),m=new r.Matrix4,u=e.getUniformLocation(o.program,"u_matrix"),d=e.getAttribLocation(o.program,"a_position"),_=e.getUniformLocation(o.program,"u_color"),f=function(t){for(let n=0;n<t.length;n++)i.write(new Float32Array(t[n].points)).divide(d,3,3,0),e.drawArrays(e[t[n].method],0,t[n].length)};!function n(){e.uniformMatrix4fv(u,!1,m.rotate(.05,-1,.2,0,1,.2,0).value()),e.uniform4f(_,1,.2,.2,1),f(l),e.uniform4f(_,.6,.6,.6,1),f(s),f(a),e.uniform4f(_,.2,.3,.1,.4),f(p),f(h),t.isClose||requestAnimationFrame(n)}()}),200)},beforeDestroy(){this.isClose=!0}})},797:(t,n,e)=>{e.d(n,{A:()=>a});var o=e(601),i=e.n(o),r=e(314),s=e.n(r)()(i());s.push([t.id,".h2o{width:500px;height:500px;text-align:center}",""]);const a=s}}]);